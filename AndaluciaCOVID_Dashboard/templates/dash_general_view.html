{% extends 'base.html' %}
{% block content %}
<div>
                <h2>Incidencia</h2>
            <div class="overview_card-icon">Tasa a 14 días {{tasaInc14}} +{{percentageAument}}</div>
            <div class="overview_card-icon">Tasa a 7 días {{tasaInc7}}</div>

            </div>
            <div>
                <h2>Fallecidos y recuperados totales</h2>
                <ul>
                    <li><div class="overview_card-icon">Recuperados totales {{recovered}}</div></li>
                    <li><div class="overview_card-icon">Fallecidos totales {{deceased}}</div></li>
                </ul>
            </div>
        </div>

        <div class="flex-grid">
            <div>
                <h2>Aumento diario de contagios</h2> 
                <canvas class="responsive-canvas" id="pie-chart" width="350" height="230"></canvas>
            </div>
            <div>
                <h2>Evolución diaria de fallecidos y curados</h2> 
               <canvas class="responsive-canvas" id="pie-chart2" width="350" height="230"></canvas>
            </div>
        </div>

        <div class="flex-grid">
            <div>
                <h2>Aumento en hospitalización</h2>
                <canvas class="responsive-canvas" id="pie-chart3" width="350" height="230"></canvas>
            </div>
<script>
    var ctx = document.getElementById('pie-chart').getContext('2d'); 
    var data_1 = {
        datasets: [{
        fill: true,
        borderColor: "#99dcd1",
        fill: false,
        label: 'Contagios en un día',
        color: setColorText(),
        data: {{ dataAument|safe }}
        }],
        labels: {{ labels|safe }}
        };  
    var chart1 = new Chart(ctx, {
        type: 'line',
        data: data_1,
        options: {
            legend: {
                labels: {
                    fontColor: setColorText()
                }
            },
            scales: {
                yAxes: [{
                    ticks: {
                        fontColor: setColorText()
                    }
                }],
                xAxes: [{
                    ticks: {
                        fontColor: setColorText(),
                    }
                }]
            }
        }
        });
    
    var ctx_2 = document.getElementById('pie-chart2').getContext('2d'); 
    var data_2 = {
        datasets: [{
        borderColor: "#7dcabe",
        label: 'Fallecidos totales',
        fill: false,
        data: {{ deceasedList |safe }}
        },
        {
        borderColor: "#5fb9ac",
        fill: false,
        label: 'Curados totales',
        data: {{ recoveredList |safe }}
        }
        ],
        labels: {{ labels2 |safe }}
        }; 
    var chart2 = new Chart(ctx_2, {
         type: 'line',
        data: data_2,
        options: {
            legend: {
                labels: {
                    fontColor: setColorText()
                }
            },
            scales: {
                yAxes: [{
                    ticks: {
                        fontColor: setColorText()
                    }
                }],
                xAxes: [{
                    ticks: {
                        fontColor: setColorText(),
                    }
                }]
            }
        }
            });
    var ctx_3 = document.getElementById('pie-chart3').getContext('2d'); 
    var data_3 = {
        datasets: [{
        backgroundColor: "#3ea79a",
        label: 'UCI',
        data: {{ dataICU|safe }}
        },
        {
        backgroundColor: "#009688",
        label: 'Convencional',
        data: {{ dataHospitalizedCounter|safe }}
        }
        ],
        labels: {{ labels2 |safe }}
        };  
    var chart3 = new Chart(ctx_3, {
         type: 'bar',
        data: data_3,
        options: {
            legend: {
                labels: {
                    fontColor: setColorText()
                }
            },
            scales: {
                yAxes: [{
                    ticks: {
                        fontColor: setColorText()
                    }
                }],
                xAxes: [{
                    ticks: {
                        fontColor: setColorText(),
                    }
                }]
            }
        }
            });        
</script>
{% endblock %}
</div>